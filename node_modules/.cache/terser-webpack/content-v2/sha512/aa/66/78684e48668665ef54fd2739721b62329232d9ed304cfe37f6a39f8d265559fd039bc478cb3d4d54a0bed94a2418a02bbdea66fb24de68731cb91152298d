{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{\"k+ul\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"Tab3PageModule\",(function(){return tab3_module_Tab3PageModule}));var ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),core=__webpack_require__(\"fXoL\"),angular_fire_database=__webpack_require__(\"sSZD\"),angular_fire_auth=__webpack_require__(\"UbJi\"),auth_service=__webpack_require__(\"FHRc\"),explore_container_component=__webpack_require__(\"QQAA\");function Tab3Page_ion_card_9_Template(rf,ctx){if(1&rf){const _r3=core.Mb();core.Lb(0,\"ion-card\"),core.Lb(1,\"ion-item-sliding\"),core.Lb(2,\"ion-item\",7),core.Lb(3,\"ion-label\",8),core.Lb(4,\"h2\",9),core.gc(5),core.Kb(),core.Lb(6,\"h3\"),core.gc(7),core.Kb(),core.Kb(),core.Lb(8,\"h3\",10),core.gc(9),core.Kb(),core.Jb(10,\"ion-icon\",11),core.Kb(),core.Lb(11,\"ion-item-options\",12),core.Lb(12,\"ion-item-option\",13),core.Tb(\"click\",(function(){core.cc(_r3);const historial_r1=ctx.$implicit;return core.Vb().borrar(historial_r1)})),core.Jb(13,\"ion-icon\",14),core.Kb(),core.Kb(),core.Kb(),core.Kb()}if(2&rf){const historial_r1=ctx.$implicit;core.yb(5),core.hc(historial_r1.titulo),core.yb(2),core.hc(historial_r1.dia),core.yb(2),core.jc(\"\",historial_r1.cuenta,\"\",historial_r1.divisa,\"\",historial_r1.plata,\"\")}}let tab3_page_Tab3Page=(()=>{class Tab3Page{constructor(afDB,AFauth,authService,router){this.afDB=afDB,this.AFauth=AFauth,this.authService=authService,this.router=router,this.historiales=[],this.AFauth.authState.subscribe(user=>{user&&(this.afDB.list(\"/Users/\"+user.uid+\"/plata\").valueChanges().subscribe(data=>{this.dolaresTotales=data[0],this.pesosTotales=data[1]}),this.getHistorial(user.uid))})}getHistorial(user_id){this.id=user_id,this.afDB.list(\"Users/\"+user_id+\"/historial/\").snapshotChanges([\"child_added\",\"child_removed\"]).subscribe(actions=>{this.historiales=[],actions.forEach(action=>{this.historiales.push({key:action.key,titulo:action.payload.exportVal().titulo,divisa:action.payload.exportVal().divisa,cuenta:action.payload.exportVal().cuenta,plata:action.payload.exportVal().plata,dia:action.payload.exportVal().dia})})})}borrar(historia){\"-\"==historia.cuenta?\"$\"==historia.divisa?(this.pesosTotales=parseInt(this.pesosTotales)+parseInt(historia.plata),this.afDB.database.ref(\"/Users/\"+this.id+\"/plata/pesos\").set(this.pesosTotales)):(this.pesosTotales=parseInt(this.dolaresTotales)+parseInt(historia.plata),this.afDB.database.ref(\"/Users/\"+this.id+\"/plata/dolares\").set(this.pesosTotales)):\"$\"==historia.divisa?(this.pesosTotales=parseInt(this.pesosTotales)-parseInt(historia.plata),this.afDB.database.ref(\"/Users/\"+this.id+\"/plata/pesos\").set(this.pesosTotales)):(this.pesosTotales=parseInt(this.dolaresTotales)-parseInt(historia.plata),this.afDB.database.ref(\"/Users/\"+this.id+\"/plata/dolares\").set(this.pesosTotales)),this.afDB.list(\"Users/\"+this.id+\"/historial/\").remove(historia.key)}}return Tab3Page.ɵfac=function(t){return new(t||Tab3Page)(core.Ib(angular_fire_database.a),core.Ib(angular_fire_auth.a),core.Ib(auth_service.a),core.Ib(router.g))},Tab3Page.ɵcmp=core.Cb({type:Tab3Page,selectors:[[\"app-tab3\"]],decls:11,vars:3,consts:[[3,\"translucent\"],[2,\"text-align\",\"center\"],[3,\"fullscreen\"],[\"collapse\",\"condense\"],[\"size\",\"large\"],[4,\"ngFor\",\"ngForOf\"],[\"name\",\"Tab 3 page\"],[2,\"--background\",\"#03532b\"],[2,\"color\",\"white\"],[2,\"font-weight\",\"bold\"],[2,\"color\",\"white\",\"margin-bottom\",\"5%\"],[\"name\",\"cash\",2,\"font-size\",\"150%\",\"margin-left\",\"2%\",\"color\",\"white\",\"opacity\",\"50%\"],[\"side\",\"end\"],[\"color\",\"danger\",3,\"click\"],[\"name\",\"trash\",\"slot\",\"icon-only\"]],template:function(rf,ctx){1&rf&&(core.Lb(0,\"ion-header\",0),core.Lb(1,\"ion-toolbar\"),core.Lb(2,\"ion-title\",1),core.gc(3,\" Historial \"),core.Kb(),core.Kb(),core.Kb(),core.Lb(4,\"ion-content\",2),core.Lb(5,\"ion-header\",3),core.Lb(6,\"ion-toolbar\"),core.Lb(7,\"ion-title\",4),core.gc(8,\"Historial\"),core.Kb(),core.Kb(),core.Kb(),core.fc(9,Tab3Page_ion_card_9_Template,14,5,\"ion-card\",5),core.Jb(10,\"app-explore-container\",6),core.Kb()),2&rf&&(core.Yb(\"translucent\",!0),core.yb(4),core.Yb(\"fullscreen\",!0),core.yb(5),core.Yb(\"ngForOf\",ctx.historiales))},directives:[ionic_angular.m,ionic_angular.C,ionic_angular.B,ionic_angular.j,common.h,explore_container_component.a,ionic_angular.g,ionic_angular.s,ionic_angular.p,ionic_angular.t,ionic_angular.n,ionic_angular.r,ionic_angular.q],styles:[\"\"]}),Tab3Page})();var explore_container_module=__webpack_require__(\"qtYk\");const routes=[{path:\"\",component:tab3_page_Tab3Page}];let tab3_routing_module_Tab3PageRoutingModule=(()=>{class Tab3PageRoutingModule{}return Tab3PageRoutingModule.ɵmod=core.Gb({type:Tab3PageRoutingModule}),Tab3PageRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||Tab3PageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),Tab3PageRoutingModule})(),tab3_module_Tab3PageModule=(()=>{class Tab3PageModule{}return Tab3PageModule.ɵmod=core.Gb({type:Tab3PageModule}),Tab3PageModule.ɵinj=core.Fb({factory:function(t){return new(t||Tab3PageModule)},imports:[[ionic_angular.D,common.b,fesm2015_forms.a,explore_container_module.a,router.i.forChild([{path:\"\",component:tab3_page_Tab3Page}]),tab3_routing_module_Tab3PageRoutingModule]]}),Tab3PageModule})()}}]);","extractedComments":[]}
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"k+ul":function(t,s,e){"use strict";e.r(s),e.d(s,"Tab3PageModule",(function(){return y}));var a=e("TEn/"),i=e("tyNb"),o=e("ofXK"),r=e("3Pt+"),n=e("fXoL"),l=e("sSZD"),h=e("UbJi"),c=e("FHRc"),b=e("QQAA");const p=["search"];function d(t,s){if(1&t){const t=n.Mb();n.Lb(0,"ion-card"),n.Lb(1,"ion-item-sliding"),n.Lb(2,"ion-item",5),n.Lb(3,"ion-label",6),n.Lb(4,"h2",7),n.gc(5),n.Kb(),n.Lb(6,"h3"),n.gc(7),n.Kb(),n.Kb(),n.Lb(8,"h3",8),n.gc(9),n.Kb(),n.Jb(10,"ion-icon",9),n.Kb(),n.Lb(11,"ion-item-options",10),n.Lb(12,"ion-item-option",11),n.Tb("click",(function(){n.cc(t);const e=s.$implicit;return n.Vb().borrar(e)})),n.Jb(13,"ion-icon",12),n.Kb(),n.Kb(),n.Kb(),n.Kb()}if(2&t){const t=s.$implicit;n.yb(5),n.hc(t.titulo),n.yb(2),n.hc(t.dia),n.yb(2),n.jc("",t.cuenta,"",t.divisa,"",t.plata,"")}}let u=(()=>{class t{constructor(t,s,e,a){this.afDB=t,this.AFauth=s,this.authService=e,this.router=a,this.historiales=[],this.AFauth.authState.subscribe(t=>{t&&(this.afDB.list("/Users/"+t.uid+"/plata").valueChanges().subscribe(t=>{this.dolaresTotales=t[0],this.pesosTotales=t[1]}),this.getHistorial(t.uid))})}ngOnInit(){}getHistorial(t){this.id=t,this.afDB.list("Users/"+t+"/historial/").snapshotChanges(["child_added","child_removed"]).subscribe(t=>{this.historiales=[],t.forEach(t=>{this.historiales.push({key:t.key,titulo:t.payload.exportVal().titulo,divisa:t.payload.exportVal().divisa,cuenta:t.payload.exportVal().cuenta,plata:t.payload.exportVal().plata,dia:t.payload.exportVal().dia})})}),new Promise(t=>setTimeout(t,1e3)).then(()=>{this.searchedItem=this.historiales})}borrar(t){"-"==t.cuenta?"$"==t.divisa?(this.pesosTotales=parseInt(this.pesosTotales)+parseInt(t.plata),this.afDB.database.ref("/Users/"+this.id+"/plata/pesos").set(this.pesosTotales)):(this.pesosTotales=parseInt(this.dolaresTotales)+parseInt(t.plata),this.afDB.database.ref("/Users/"+this.id+"/plata/dolares").set(this.pesosTotales)):"$"==t.divisa?(this.pesosTotales=parseInt(this.pesosTotales)-parseInt(t.plata),this.afDB.database.ref("/Users/"+this.id+"/plata/pesos").set(this.pesosTotales)):(this.pesosTotales=parseInt(this.dolaresTotales)-parseInt(t.plata),this.afDB.database.ref("/Users/"+this.id+"/plata/dolares").set(this.pesosTotales)),this.afDB.list("Users/"+this.id+"/historial/").remove(t.key)}ionChange(t){const s=t.target.value;this.searchedItem=this.historiales,s&&""!=s.trim()&&(this.searchedItem=this.searchedItem.filter(t=>t.titulo.toLowerCase().indexOf(s.toLowerCase())>-1))}}return t.\u0275fac=function(s){return new(s||t)(n.Ib(l.a),n.Ib(h.a),n.Ib(c.a),n.Ib(i.g))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-tab3"]],viewQuery:function(t,s){var e;1&t&&n.kc(p,!0),2&t&&n.bc(e=n.Ub())&&(s.search=e.first)},decls:10,vars:2,consts:[["translucent",""],["placeholder","Buscar",3,"ionChange"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["name","Tab 3 page"],[2,"--background","#03532b"],[2,"color","white"],[2,"font-weight","bold"],[2,"color","white","margin-bottom","5%"],["name","cash",2,"font-size","150%","margin-left","2%","color","white","opacity","50%"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"]],template:function(t,s){1&t&&(n.Lb(0,"ion-header",0),n.Lb(1,"ion-toolbar"),n.Lb(2,"ion-title"),n.gc(3,"Historial"),n.Kb(),n.Kb(),n.Lb(4,"ion-toolbar"),n.Lb(5,"ion-searchbar",1),n.Tb("ionChange",(function(t){return s.ionChange(t)})),n.Kb(),n.Kb(),n.Kb(),n.Lb(6,"ion-content",2),n.Lb(7,"ion-list"),n.fc(8,d,14,5,"ion-card",3),n.Kb(),n.Jb(9,"app-explore-container",4),n.Kb()),2&t&&(n.yb(6),n.Yb("fullscreen",!0),n.yb(2),n.Yb("ngForOf",s.searchedItem))},directives:[a.m,a.E,a.D,a.x,a.K,a.j,a.u,o.h,b.a,a.g,a.s,a.p,a.t,a.n,a.r,a.q],styles:[""]}),t})();var f=e("qtYk");const m=[{path:"",component:u}];let g=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(s){return new(s||t)},imports:[[i.i.forChild(m)],i.i]}),t})(),y=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(s){return new(s||t)},imports:[[a.F,o.b,r.a,f.a,i.i.forChild([{path:"",component:u}]),g]]}),t})()}}]);